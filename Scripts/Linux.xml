<?xml version="1.0"?>
<project>
	<target name="winscp" >
		<property name="remote.dir" value="${string::replace(string::replace(product.dir, sources.dir, ''), '\', '/')}" />
		<echo>remote.dir: ${remote.dir}</echo>
		<property name="winscp" value="${environment::get-variable('ProgramFiles(x86)')}\winscp\winscp.com" /> <!-- .com file writes correct console -->
		<exec program="${winscp}" timeout="1800000" > 
			<arg value='${sshHost}' />
			<!--arg value='/hostkey=' /-->
			<arg value='/command "synchronize remote ""${product.dir}"" ""${remote.dir}"" -filemask=""|.svn/;*.build""" "synchronize local ""${backup.dir}\${product.name}\images"" ""${remote.dir}/images"" " exit' />
		</exec>

	</target>
	
  <target name="winscpAndBackup" depends="winscp" >
		<call target="wikiBackup" />
	</target>
</project>